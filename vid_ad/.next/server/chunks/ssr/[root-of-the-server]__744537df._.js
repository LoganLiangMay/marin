module.exports=[18622,(a,b,c)=>{b.exports=a.x("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js",()=>require("next/dist/compiled/next-server/app-page-turbo.runtime.prod.js"))},22463,(a,b,c)=>{"use strict";b.exports=a.r(18622)},6796,(a,b,c)=>{"use strict";b.exports=a.r(22463).vendored["react-ssr"].ReactJsxRuntime},3160,(a,b,c)=>{"use strict";b.exports=a.r(22463).vendored["react-ssr"].React},24361,(a,b,c)=>{b.exports=a.x("util",()=>require("util"))},14747,(a,b,c)=>{b.exports=a.x("path",()=>require("path"))},65480,a=>{"use strict";var b=a.i(6796),c=a.i(3160);a.i(89811);var d=a.i(55719),e=a.i(74330);a.i(32560);var f=a.i(32066);let g=(0,c.createContext)(void 0);function h(){let a=(0,c.useContext)(g);if(void 0===a)throw Error("useAuth must be used within an AuthProvider");return a}function i({children:a}){let[h,i]=(0,c.useState)(null),[j,k]=(0,c.useState)(null),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(null),p=async(a,b)=>{if(!a)return;let c=(0,f.doc)(e.firestore,"users",a.uid),d=await (0,f.getDoc)(c);if(d.exists()){await (0,f.updateDoc)(c,{lastLogin:(0,f.serverTimestamp)()});let b=d.data();k({uid:a.uid,email:b.email,displayName:b.displayName,photoURL:b.photoURL,createdAt:b.createdAt?.toDate(),lastLogin:b.lastLogin?.toDate(),metadata:b.metadata})}else{let d={uid:a.uid,email:a.email,displayName:a.displayName||b?.displayName||null,photoURL:a.photoURL,createdAt:new Date,lastLogin:new Date,...b};try{await (0,f.setDoc)(c,{...d,createdAt:(0,f.serverTimestamp)(),lastLogin:(0,f.serverTimestamp)()}),k(d)}catch(a){console.error("Error creating user profile:",a),o("Failed to create user profile")}}},q=async(a,b,c)=>{o(null);try{let f=await (0,d.createUserWithEmailAndPassword)(e.auth,a,b);return c&&f.user&&await (0,d.updateProfile)(f.user,{displayName:c}),await p(f.user,{displayName:c}),f}catch(a){throw o(a.message),a}},r=async(a,b,c=!1)=>{o(null);try{await (0,d.setPersistence)(e.auth,c?d.browserLocalPersistence:d.browserSessionPersistence);let f=await (0,d.signInWithEmailAndPassword)(e.auth,a,b);return f.user&&(await p(f.user),c&&localStorage.setItem("sessionStartTime",new Date().toISOString())),f}catch(a){throw o(a.message),a}},s=async()=>{o(null);try{await (0,d.signOut)(e.auth),k(null),localStorage.removeItem("sessionStartTime")}catch(a){throw o(a.message),a}},t=()=>{let a=localStorage.getItem("sessionStartTime");if(a&&h){let b=new Date(a);(new Date().getTime()-b.getTime())/864e5>30&&(s(),o("Your session has expired after 30 days. Please log in again."))}},u=async a=>{o(null);try{await (0,d.sendPasswordResetEmail)(e.auth,a)}catch(a){throw o(a.message),a}},v=async a=>{if(!h)return void o("No user logged in");o(null);try{let b=(0,f.doc)(e.firestore,"users",h.uid);await (0,f.updateDoc)(b,a),k(b=>b?{...b,...a}:null),(void 0!==a.displayName||void 0!==a.photoURL)&&await (0,d.updateProfile)(h,{displayName:a.displayName||h.displayName,photoURL:a.photoURL||h.photoURL})}catch(a){throw o(a.message),a}};return(0,c.useEffect)(()=>{let a=(0,d.onAuthStateChanged)(e.auth,async a=>{if(i(a),a){let b=(0,f.doc)(e.firestore,"users",a.uid),c=await (0,f.getDoc)(b);if(c.exists()){let b=c.data();k({uid:a.uid,email:b.email,displayName:b.displayName,photoURL:b.photoURL,createdAt:b.createdAt?.toDate(),lastLogin:b.lastLogin?.toDate(),metadata:b.metadata})}else await p(a);t()}else k(null);m(!1)}),b=setInterval(()=>{t()},36e5);return()=>{a(),clearInterval(b)}},[]),(0,b.jsx)(g.Provider,{value:{currentUser:h,userProfile:j,loading:l,error:n,signup:q,login:r,logout:s,resetPassword:u,updateUserProfile:v,clearError:()=>o(null),checkSessionExpiry:t},children:a})}a.s(["AuthProvider",()=>i,"useAuth",()=>h])}];

//# sourceMappingURL=%5Broot-of-the-server%5D__744537df._.js.map